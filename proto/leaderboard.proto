syntax = "proto3";

option objc_class_prefix = "LB";

package leaderboard;

// Interface exported by the server.
service LeaderBoard {
  rpc AuthenticateUser (LoginPassword) returns (Token) {}

  rpc RecordPlayerScore(stream PlayerScore) returns (stream ScoreResponse) {}

  rpc RouteChat(GetLeaderBoard) returns (LeaderBoardResponse) {}
}

message LoginPassword {
  string login = 1;
  string password = 2;
}

message Token {
  string auth_token = 1;
}

message PlayerScore {
  Token token = 1;
  string name = 2;
  int64 score = 3;
}

message ScoreResponse {
  int64 rank = 1;
}

message GetLeaderBoard {
  Token token = 1;
  int32 page = 2;
  string name = 3;
}

message LeaderBoardRecord {
  string name = 1;
  int64 score = 2;
  int32 rank = 3;
}


message LeaderBoardResponse {
  repeated LeaderBoardRecord results = 1;
  repeated LeaderBoardRecord around_me = 2;
  int32 next_page = 3;
}